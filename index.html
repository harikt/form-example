<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Standalone Form for PHP by harikt</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Standalone Form for PHP</h1>
        <p class="header">Standalone Form for PHP with Aura.Input, Aura.Html</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/harikt/phpform/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/harikt/phpform/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/harikt/phpform">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/harikt">harikt</a></p>


      </header>
      <section>
        <h1>
<a name="standalone-form-for-php" class="anchor" href="#standalone-form-for-php"><span class="octicon octicon-link"></span></a>Standalone Form for PHP</h1>

<p>The minimal stuff you need to create and validate your form. If you want to
use a powerful validation and filtering use something like [Aura.Filter][] 
or your favourite component that does it. You can see how you can do it
in the example in master branch.</p>

<p>The <code>composer.json</code> file</p>

<div class="highlight highlight-php"><pre><span class="p">{</span>
    <span class="s2">"require"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"aura/input"</span><span class="o">:</span> <span class="s2">"&gt;=1.0.0, &lt;=2.0.0"</span><span class="p">,</span>
        <span class="s2">"aura/html"</span><span class="o">:</span> <span class="s2">"2.0.0-beta1"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>The page which you need to bring the form.</p>

<div class="highlight highlight-php"><pre><span class="k">use</span> <span class="nx">Aura\Input\Builder</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Aura\Input\Filter</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Aura\Input\Form</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Aura\Html\HelperLocatorFactory</span><span class="p">;</span>

<span class="nv">$loader</span> <span class="o">=</span> <span class="k">require</span> <span class="nb">dirname</span><span class="p">(</span><span class="nx">__DIR__</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'/vendor/autoload.php'</span><span class="p">;</span>
</pre></div>

<h2>
<a name="creating-your-form-class" class="anchor" href="#creating-your-form-class"><span class="octicon octicon-link"></span></a>Creating your Form class</h2>

<p>To create your form extend the class with Aura\Input\Form . 
Here is an example of contact form with fields name, email, url and message in it.</p>

<div class="highlight highlight-php"><pre><span class="k">class</span> <span class="nc">ContactForm</span> <span class="k">extends</span> <span class="nx">Form</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">init</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setField</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setAttribs</span><span class="p">([</span>
                <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'contact[name]'</span><span class="p">,</span>
                <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'contact[name]'</span><span class="p">,</span>
                <span class="s1">'size'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
                <span class="s1">'maxlength'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
            <span class="p">]);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setField</span><span class="p">(</span><span class="s1">'email'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setAttribs</span><span class="p">([</span>
                <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'contact[email]'</span><span class="p">,</span>
                <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'contact[email]'</span><span class="p">,</span>
                <span class="s1">'size'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
                <span class="s1">'maxlength'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
            <span class="p">]);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setField</span><span class="p">(</span><span class="s1">'url'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setAttribs</span><span class="p">([</span>
                <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'contact[url]'</span><span class="p">,</span>
                <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'contact[url]'</span><span class="p">,</span>
                <span class="s1">'size'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
                <span class="s1">'maxlength'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
            <span class="p">]);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setField</span><span class="p">(</span><span class="s1">'message'</span><span class="p">,</span> <span class="s1">'textarea'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setAttribs</span><span class="p">([</span>
                <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'contact[message]'</span><span class="p">,</span>
                <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'contact[message]'</span><span class="p">,</span>
                <span class="s1">'cols'</span> <span class="o">=&gt;</span> <span class="mi">40</span><span class="p">,</span>
                <span class="s1">'rows'</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span>
            <span class="p">]);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setField</span><span class="p">(</span><span class="s1">'submit'</span><span class="p">,</span> <span class="s1">'submit'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setAttribs</span><span class="p">([</span><span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="s1">'send'</span><span class="p">]);</span>

        <span class="nv">$filter</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getFilter</span><span class="p">();</span>

        <span class="nv">$filter</span><span class="o">-&gt;</span><span class="na">setRule</span><span class="p">(</span>
            <span class="s1">'name'</span><span class="p">,</span>
            <span class="s1">'Name must be alphabetic only.'</span><span class="p">,</span>
            <span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nb">ctype_alpha</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">);</span>

        <span class="nv">$filter</span><span class="o">-&gt;</span><span class="na">setRule</span><span class="p">(</span>
            <span class="s1">'email'</span><span class="p">,</span> 
            <span class="s1">'Enter a valid email address'</span><span class="p">,</span> 
            <span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nb">filter_var</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nx">FILTER_VALIDATE_EMAIL</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">);</span>

        <span class="nv">$filter</span><span class="o">-&gt;</span><span class="na">setRule</span><span class="p">(</span>
            <span class="s1">'url'</span><span class="p">,</span> 
            <span class="s1">'Enter a valid url'</span><span class="p">,</span> 
            <span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nb">filter_var</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nx">FILTER_VALIDATE_URL</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">);</span>

        <span class="nv">$filter</span><span class="o">-&gt;</span><span class="na">setRule</span><span class="p">(</span>
            <span class="s1">'message'</span><span class="p">,</span> 
            <span class="s1">'Message should be more than 7 characters'</span><span class="p">,</span> 
            <span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Now create the object of Form passing the <code>Aura\Input\Builder</code> object and 
object of type <code>Aura\Input\FilterInterface</code>.
As we are using the base filter of Aura.Input pass <code>Aura\Input\Filter</code>.</p>

<div class="highlight highlight-php"><pre><span class="nv">$form</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ContactForm</span><span class="p">(</span><span class="k">new</span> <span class="nx">Builder</span><span class="p">(),</span> <span class="k">new</span> <span class="nx">Filter</span><span class="p">());</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'submit'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'submit'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'send'</span><span class="p">)</span> <span class="p">{</span>    
    <span class="nv">$data</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'contact'</span><span class="p">];</span>
    <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">fill</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">filter</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">"Yes successfully validated and filtered"</span><span class="p">;</span>
        <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
        <span class="k">exit</span><span class="p">;</span>        
    <span class="p">}</span>    
<span class="p">}</span>

<span class="nv">$factory</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HelperLocatorFactory</span><span class="p">();</span>
<span class="nv">$helper</span> <span class="o">=</span> <span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">newInstance</span><span class="p">();</span>

<span class="k">function</span> <span class="nf">showFieldErrors</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$errors</span> <span class="o">=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">getMessages</span><span class="p">(</span><span class="nv">$name</span><span class="p">);</span>
    <span class="nv">$str</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$errors</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$str</span> <span class="o">.=</span> <span class="s1">'&lt;ul&gt;'</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$errors</span> <span class="k">as</span> <span class="nv">$error</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$str</span> <span class="o">.=</span> <span class="s1">'&lt;li&gt;'</span> <span class="o">.</span> <span class="nv">$error</span> <span class="o">.</span> <span class="s1">'&lt;/li&gt;'</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$str</span> <span class="o">.=</span> <span class="s1">'&lt;/ul&gt;'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$str</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">    &lt;title&gt;Aura Form, to make it standalone&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>
<span class="x">    &lt;form method="post" action="" enctype="multipart/form-data" &gt;</span>
<span class="x">        &lt;table cellpadding="0" cellspacing="0"&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;Name : &lt;/td&gt;</span>
<span class="x">                &lt;td&gt;</span>
<span class="x">                </span><span class="cp">&lt;?php</span>
                    <span class="k">echo</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">input</span><span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'name'</span><span class="p">));</span>
                    <span class="k">echo</span> <span class="nx">showFieldErrors</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">);</span>
                <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                &lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;Email : &lt;/td&gt;</span>
<span class="x">                &lt;td&gt;</span>
<span class="x">                </span><span class="cp">&lt;?php</span>
                    <span class="k">echo</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">input</span><span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'email'</span><span class="p">));</span>
                    <span class="k">echo</span> <span class="nx">showFieldErrors</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="s1">'email'</span><span class="p">);</span>
                <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                &lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;Url : &lt;/td&gt;</span>
<span class="x">                &lt;td&gt;</span>
<span class="x">                </span><span class="cp">&lt;?php</span>
                    <span class="k">echo</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">input</span><span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'url'</span><span class="p">));</span>
                    <span class="k">echo</span> <span class="nx">showFieldErrors</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="s1">'url'</span><span class="p">);</span>
                <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                &lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;Message : &lt;/td&gt;</span>
<span class="x">                &lt;td&gt;</span>
<span class="x">                </span><span class="cp">&lt;?php</span>
                    <span class="k">echo</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">input</span><span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'message'</span><span class="p">));</span>
                    <span class="k">echo</span> <span class="nx">showFieldErrors</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="s1">'message'</span><span class="p">);</span>
                <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                &lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td colspan="2"&gt;</span>
<span class="x">                </span><span class="cp">&lt;?php</span>
                <span class="k">echo</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">input</span><span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'submit'</span><span class="p">));</span>
                <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                &lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">        &lt;/table&gt;</span>
<span class="x">    &lt;/form&gt;</span>
<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-5998889-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
