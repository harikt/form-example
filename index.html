<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Standalone Form for PHP : Standalone Form for PHP with Aura.Input, Aura.View Helpers" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Standalone Form for PHP</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/harikt/form-example">View on GitHub</a>

          <h1 id="project_title">Standalone Form for PHP</h1>
          <h2 id="project_tagline">Standalone Form for PHP with Aura.Input, Aura.View Helpers</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/harikt/form-example/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/harikt/form-example/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="standalone-form-for-php" class="anchor" href="#standalone-form-for-php"><span class="octicon octicon-link"></span></a>Standalone Form for PHP</h1>

<p>The minimal stuff you need to create and validate your form. If you want to
use a powerful validation and filtering use something like <a href="http://github.com/auraphp/Aura.Filter">Aura.Filter</a> 
or use your favourite component that does the filtering/validation. You can see how you can integrate Aura.Filter in the master branch.</p>

<p>The <code>composer.json</code> file</p>

<div class="highlight"><pre><span class="p">{</span>
    <span class="s2">"minimum-stability"</span><span class="o">:</span> <span class="s2">"dev"</span><span class="p">,</span>
    <span class="s2">"require"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"aura/input"</span><span class="o">:</span> <span class="s2">"1.0.0-beta1"</span><span class="p">,</span>
        <span class="s2">"aura/view"</span><span class="o">:</span> <span class="s2">"1.1.2"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>The page which you need to bring the form.</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">use</span> <span class="nx">Aura\Input\Builder</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Aura\Input\Filter</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Aura\Input\Form</span><span class="p">;</span>

<span class="nv">$loader</span> <span class="o">=</span> <span class="k">require</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/vendor/autoload.php'</span><span class="p">;</span>

<span class="nv">$helper</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Aura\View\HelperLocator</span><span class="p">([</span>
    <span class="s1">'field'</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span> 
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Aura\View\Helper\Form\Field</span><span class="p">(</span>
            <span class="k">require</span> <span class="nb">dirname</span><span class="p">(</span><span class="nx">__DIR__</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'/vendor/aura/view/scripts/field_registry.php'</span>
        <span class="p">);</span> 
    <span class="p">},</span>
    <span class="s1">'input'</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">new</span> <span class="nx">Aura\View\Helper\Form\Input</span><span class="p">(</span>
            <span class="k">require</span> <span class="nb">dirname</span><span class="p">(</span><span class="nx">__DIR__</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'/vendor/aura/view/scripts/input_registry.php'</span>
        <span class="p">);</span> 
    <span class="p">},</span>
    <span class="s1">'radios'</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span> 
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Aura\View\Helper\Form\Radios</span><span class="p">(</span>
            <span class="k">new</span> <span class="nx">Aura\View\Helper\Form\Input\Checked</span>
        <span class="p">);</span> 
    <span class="p">},</span>
    <span class="s1">'repeat'</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span> 
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Aura\View\Helper\Form\Repeat</span><span class="p">(</span>
            <span class="k">require</span> <span class="nb">dirname</span><span class="p">(</span><span class="nx">__DIR__</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'/vendor/aura/view/scripts/repeat_registry.php'</span>
        <span class="p">);</span> 
    <span class="p">},</span>
    <span class="s1">'select'</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span> 
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Aura\View\Helper\Form\Select</span><span class="p">;</span> 
    <span class="p">},</span>
    <span class="s1">'textarea'</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span> 
         <span class="k">return</span> <span class="k">new</span> <span class="nx">Aura\View\Helper\Form\Textarea</span><span class="p">;</span> 
    <span class="p">},</span>
<span class="p">]);</span>
</pre></div>

<h2>
<a name="creating-your-form-class" class="anchor" href="#creating-your-form-class"><span class="octicon octicon-link"></span></a>Creating your Form Class</h2>

<p>To create your form extend the class with <code>Aura\Input\Form</code> . Here is an example of contact form
with fields <code>name</code>, <code>email</code>, <code>url</code> and <code>message</code> in it.</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="cm">/*</span>
<span class="cm"> * Contact Form class</span>
<span class="cm"> */</span>
<span class="k">class</span> <span class="nc">ContactForm</span> <span class="k">extends</span> <span class="nx">Form</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">init</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setField</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setAttribs</span><span class="p">([</span>
                <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'name'</span><span class="p">,</span>
                <span class="s1">'size'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
                <span class="s1">'maxlength'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
            <span class="p">]);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setField</span><span class="p">(</span><span class="s1">'email'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setAttribs</span><span class="p">([</span>
                <span class="s1">'size'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
                <span class="s1">'maxlength'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
            <span class="p">]);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setField</span><span class="p">(</span><span class="s1">'url'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setAttribs</span><span class="p">([</span>
                <span class="s1">'size'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
                <span class="s1">'maxlength'</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
            <span class="p">]);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setField</span><span class="p">(</span><span class="s1">'message'</span><span class="p">,</span> <span class="s1">'textarea'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setAttribs</span><span class="p">([</span>
                <span class="s1">'cols'</span> <span class="o">=&gt;</span> <span class="mi">40</span><span class="p">,</span>
                <span class="s1">'rows'</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span>
            <span class="p">]);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setField</span><span class="p">(</span><span class="s1">'submit'</span><span class="p">,</span> <span class="s1">'submit'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setAttribs</span><span class="p">([</span><span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="s1">'send'</span><span class="p">]);</span>

        <span class="c1">// Get the filter object passed to the form, and </span>
        <span class="c1">// depending upon the filter/validator add the rules.</span>
        <span class="nv">$filter</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getFilter</span><span class="p">();</span>

        <span class="nv">$filter</span><span class="o">-&gt;</span><span class="na">setRule</span><span class="p">(</span>
            <span class="s1">'name'</span><span class="p">,</span>
            <span class="s1">'Name must be alphabetic only.'</span><span class="p">,</span>
            <span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nb">ctype_alpha</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">);</span>

        <span class="nv">$filter</span><span class="o">-&gt;</span><span class="na">setRule</span><span class="p">(</span>
            <span class="s1">'email'</span><span class="p">,</span> 
            <span class="s1">'Enter a valid email address'</span><span class="p">,</span> 
            <span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nb">filter_var</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nx">FILTER_VALIDATE_EMAIL</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">);</span>

        <span class="nv">$filter</span><span class="o">-&gt;</span><span class="na">setRule</span><span class="p">(</span>
            <span class="s1">'url'</span><span class="p">,</span> 
            <span class="s1">'Enter a valid url'</span><span class="p">,</span> 
            <span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nb">filter_var</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nx">FILTER_VALIDATE_URL</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">);</span>

        <span class="nv">$filter</span><span class="o">-&gt;</span><span class="na">setRule</span><span class="p">(</span>
            <span class="s1">'message'</span><span class="p">,</span> 
            <span class="s1">'Message should be more than 7 characters'</span><span class="p">,</span> 
            <span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Now create the object of <code>Form</code> passing the <code>Aura\Input\Builder</code> object and an object 
of type <code>Aura\Input\FilterInterface</code>. As we are using the base filter of Aura.Input
pass <code>Aura\Input\Filter</code>.</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="nv">$form</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ContactForm</span><span class="p">(</span><span class="k">new</span> <span class="nx">Builder</span><span class="p">(),</span> <span class="k">new</span> <span class="nx">Filter</span><span class="p">());</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span> <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'submit'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'send'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$data</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">;</span>
    <span class="c1">// Fill the fields with the value</span>
    <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">fill</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
    <span class="c1">// Validate and filter data</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">filter</span><span class="p">())</span> <span class="p">{</span>
        <span class="c1">// success</span>
        <span class="k">echo</span> <span class="s2">"Yes successfully validated and filtered"</span><span class="p">;</span>
        <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
        <span class="k">exit</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$field</span> <span class="o">=</span> <span class="nv">$helper</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'field'</span><span class="p">);</span>
<span class="k">function</span> <span class="nf">showFieldErrors</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$errors</span> <span class="o">=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">getMessages</span><span class="p">(</span><span class="nv">$name</span><span class="p">);</span>
    <span class="nv">$str</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$errors</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$str</span> <span class="o">.=</span> <span class="s1">'&lt;ul&gt;'</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$errors</span> <span class="k">as</span> <span class="nv">$error</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$str</span> <span class="o">.=</span> <span class="s1">'&lt;li&gt;'</span> <span class="o">.</span> <span class="nv">$error</span> <span class="o">.</span> <span class="s1">'&lt;/li&gt;'</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$str</span> <span class="o">.=</span> <span class="s1">'&lt;/ul&gt;'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$str</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>

<p>In order to render a field, you can use <code>$field($form-&gt;get('name'))</code>.</p>

<div class="highlight"><pre><span class="o">&lt;</span><span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">Aura</span> <span class="nx">Form</span><span class="p">,</span> <span class="nx">to</span> <span class="nx">make</span> <span class="nx">it</span> <span class="nx">standalone</span><span class="o">&lt;/</span><span class="nx">title</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">form</span> <span class="nx">method</span><span class="o">=</span><span class="s2">"post"</span> <span class="nx">action</span><span class="o">=</span><span class="s2">""</span> <span class="nx">enctype</span><span class="o">=</span><span class="s2">"multipart/form-data"</span> <span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">table</span> <span class="nx">cellpadding</span><span class="o">=</span><span class="s2">"0"</span> <span class="nx">cellspacing</span><span class="o">=</span><span class="s2">"0"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="nx">Name</span> <span class="o">:</span> <span class="o">&lt;/</span><span class="nx">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span>
                <span class="o">&lt;?</span><span class="nx">php</span>
                    <span class="k">echo</span> <span class="nv">$field</span><span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'name'</span><span class="p">));</span>
                    <span class="k">echo</span> <span class="nx">showFieldErrors</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">);</span>
                <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                &lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;Email : &lt;/td&gt;</span>
<span class="x">                &lt;td&gt;</span>
<span class="x">                </span><span class="cp">&lt;?php</span>
                    <span class="k">echo</span> <span class="nv">$field</span><span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'email'</span><span class="p">));</span>
                    <span class="k">echo</span> <span class="nx">showFieldErrors</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="s1">'email'</span><span class="p">);</span>
                <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                &lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;Url : &lt;/td&gt;</span>
<span class="x">                &lt;td&gt;</span>
<span class="x">                </span><span class="cp">&lt;?php</span>
                    <span class="k">echo</span> <span class="nv">$field</span><span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'url'</span><span class="p">));</span>
                    <span class="k">echo</span> <span class="nx">showFieldErrors</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="s1">'url'</span><span class="p">);</span>
                <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                &lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;Message : &lt;/td&gt;</span>
<span class="x">                &lt;td&gt;</span>
<span class="x">                </span><span class="cp">&lt;?php</span>
                    <span class="k">echo</span> <span class="nv">$field</span><span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'message'</span><span class="p">));</span>
                    <span class="k">echo</span> <span class="nx">showFieldErrors</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="s1">'message'</span><span class="p">);</span>
                <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                &lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td colspan="2"&gt;</span>
<span class="x">                </span><span class="cp">&lt;?php</span> 
                <span class="k">echo</span> <span class="nv">$field</span><span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'submit'</span><span class="p">));</span>
                <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                &lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">        &lt;/table&gt;</span>
<span class="x">    &lt;/form&gt;</span>
<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Standalone Form for PHP maintained by <a href="https://github.com/harikt">harikt</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
